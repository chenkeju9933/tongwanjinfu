webpackJsonp([1],{"1kS7":function(t,i){i.f=Object.getOwnPropertySymbols},Dd8w:function(t,i,s){"use strict";i.__esModule=!0;var e,o=s("woOf"),n=(e=o)&&e.__esModule?e:{default:e};i.default=n.default||function(t){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var e in s)Object.prototype.hasOwnProperty.call(s,e)&&(t[e]=s[e])}return t}},NpIQ:function(t,i){i.f={}.propertyIsEnumerable},R4wc:function(t,i,s){var e=s("kM2E");e(e.S+e.F,"Object",{assign:s("To3L")})},To3L:function(t,i,s){"use strict";var e=s("lktj"),o=s("1kS7"),n=s("NpIQ"),c=s("sB3e"),a=s("MU5D"),l=Object.assign;t.exports=!l||s("S82l")(function(){var t={},i={},s=Symbol(),e="abcdefghijklmnopqrst";return t[s]=7,e.split("").forEach(function(t){i[t]=t}),7!=l({},t)[s]||Object.keys(l({},i)).join("")!=e})?function(t,i){for(var s=c(t),l=arguments.length,r=1,h=o.f,d=n.f;l>r;)for(var p,u=a(arguments[r++]),f=h?e(u).concat(h(u)):e(u),m=f.length,v=0;m>v;)d.call(u,p=f[v++])&&(s[p]=u[p]);return s}:l},V3tA:function(t,i,s){s("R4wc"),t.exports=s("FeBl").Object.assign},jSix:function(t,i,s){"use strict";var e=s("Dd8w"),o=s.n(e),n=s("NYxO"),c=s("VXJq"),a=s("FCHv"),l={components:{noMoreData:c.a,noData:a.a},computed:o()({},Object(n.b)(["merchant"]))},r=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"merchant-list"},[t._l(t.merchant.merchantList,function(i,e){return s("div",{key:e,staticClass:"bor-top activeActical flex-row-sb"},[s("router-link",{staticClass:"flex-row-sb",attrs:{to:i.minAppUrl,tag:"div"}},[s("div",{staticClass:"flex-column"},[s("img",{staticClass:"list-image",attrs:{src:i.shop.thumbnail}})]),t._v(" "),s("div",{staticClass:"flex-column act-msg"},[s("span",{staticClass:"title-font"},[t._v(t._s(i.title))]),t._v(" "),s("span",{staticClass:"normal-font mt10"},[t._v(t._s(i.desc))]),t._v(" "),s("span",[s("span",{staticClass:"action-font action-border"},[t._v(t._s(i.activityAmount))])]),t._v(" "),s("span",{staticClass:"address-font iconfont icon-address"},[t._v(t._s(i.shop.address))])])])],1)}),t._v(" "),s("no-more-data",{directives:[{name:"show",rawName:"v-show",value:t.merchant.merchantList.length>0,expression:"merchant.merchantList.length > 0"}]}),t._v(" "),s("no-data",{directives:[{name:"show",rawName:"v-show",value:0===t.merchant.merchantList.length,expression:"merchant.merchantList.length === 0"}]})],2)};r._withStripped=!0;var h={render:r,staticRenderFns:[]},d=h;var p=s("VU/8")(l,d,!1,null,null,null);p.options.__file="src\\components\\common\\merchant.vue";i.a=p.exports},woOf:function(t,i,s){t.exports={default:s("V3tA"),__esModule:!0}},wtox:function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=s("Dd8w"),o=s.n(e),n=s("NYxO"),c=s("jSix"),a=s("mvHQ"),l=s.n(a),r={get:function(t){return JSON.parse(localStorage.getItem(t))},set:function(t,i){localStorage.setItem(t,l()(i))},add:function(t,i){var s=r.get(t).concat(i);r.set(t,s)}},h=r,d=s("WCq4"),p={data:function(){return{popupVisible:!1,popupRightVisible:!1,slots:[{flex:1,values:["杭州市","温州市"],className:"slot1",textAlign:"center"}],isSelect:"",actionTypes:[{id:"all",num:"",text:"全部"},{id:"fruit",num:1,text:"水果"},{id:"hairdressing",num:2,text:"美发"},{id:"catering",num:3,text:"餐饮"},{id:"markets",num:4,text:"商超"}],cityList:{"杭州市":2,"温州市":4},cityInfo:{city:"杭州",cityId:2,latitude:"",longitude:""},schoolInfo:{region:[],schools:[]},selectRegionId:99999,newCity:"",params:{type:"active",start:1,shopType:"",cityId:2},locationStatu:!1,temp:""}},created:function(){this.isSelect="",this.merchant.homeMerchantList=[],this.merchant.merchantList=[],this.getLocation()},methods:{selectCity:function(){this.popupVisible=!0},selectSchool:function(){var t=this;this.selectRegionId=99999,this.popupRightVisible=!0;var i={pId:this.cityInfo.cityId,type:4};d.a.queryLocationTree(i).then(function(i){i&&i.data&&(t.schoolInfo.region=i.data||[],t.schoolInfo.region.unshift({name:"全部",id:99999}),t.getSchoolInfo())})},selectRegion:function(t){this.merchant.homeMerchantList=[],this.merchant.merchantList=[],this.schoolInfo.schools=[],this.selectRegionId=t,this.getSchoolInfo(t)},getSchoolInfo:function(t){var i=this,s={cityId:this.cityInfo.cityId};t&&99999!==t&&(s.areaId=String(t)),d.a.querySchool(s).then(function(t){t.data&&(i.schoolInfo.schools=t.data)})},getSchoolAround:function(t){this.merchant.homeMerchantList=[],this.merchant.merchantList=[],t?this.params.schoolId=t:this.params.schoolId&&delete this.params.schoolId,this.params.start=0,this.$store.dispatch("getData",this.params),this.popupRightVisible=!1},selectNav:function(t,i){this.merchant.homeMerchantList=[],this.merchant.merchantList=[],this.params.cityId=h.get("cityId"),this.params.start=0,this.isSelect=i,this.params.shopType=i,this.$store.dispatch("getData",this.params)},getMerchant:function(){this.params.cityId=h.get("cityId"),this.$store.dispatch("getData",this.params)},onValuesChange:function(t,i){this.newCity=i[0]},cityConfirm:function(){this.merchant.homeMerchantList=[],this.merchant.merchantList=[],this.cityInfo.city=this.newCity,this.cityInfo.cityId=this.cityList[this.newCity],this.popupVisible=!1,this.params.cityId=this.cityInfo.cityId,this.params.start=1,this.params.schoolId&&delete this.params.schoolId,this.$store.dispatch("changeCity",this.cityInfo),this.$store.dispatch("getData",this.params),h.set("city",this.cityInfo.city),h.set("cityId",this.cityInfo.cityId)},cityConcel:function(){this.popupVisible=!1,this.popupRightVisible=!1},getLocation:function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(this.showPosition):(this.getLocalLocation(),this.locationStatu=!0),this.locationStatu||(this.getLocalLocation(),this.locationStatu=!0)},getLocalLocation:function(){h.get("city")?(this.cityInfo.city=h.get("city"),this.cityInfo.cityId=h.get("cityId")):(this.cityInfo.city="杭州",this.cityInfo.cityId=2)},showPosition:function(t){this.cityInfo.latitude=t.coords.latitude||"",this.cityInfo.longitude=t.coords.longitude||"";var i=this;if(this.cityInfo.latitude&&this.cityInfo.longitude){var s=new qq.maps.LatLng(this.cityInfo.latitude,this.cityInfo.longitude);new qq.maps.CityService({complete:function(t){i.temp=t.detail.detail;var s=t.detail.detail.split(",");s=s.reverse();for(var e=0;e<s.length;e++)if(s[e].indexOf("市")>-1){var o=s[e];i.cityList[o]?(i.cityInfo.city=o,i.cityInfo.cityId=i.cityList[o]):(i.cityInfo.city="杭州",i.cityInfo.cityId=2),h.set("city",this.cityInfo.city),h.set("cityId",this.cityInfo.cityId);break}}}).searchCityByLatLng(s)}else this.getLocalLocation();this.locationStatu=!0}},computed:o()({},Object(n.b)(["merchant"])),components:{Merchant:c.a}},u=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"content",attrs:{id:"discounts"}},[s("nav",{staticClass:"active-bar flex-row-sb bor-bot bar-position-top bg-white"},[s("div",{staticClass:"action-region flex-row-center",on:{click:t.selectCity}},[s("span",[t._v(t._s(t.cityInfo.city))]),t._v(" "),s("span",{staticClass:"iconfont icon-down"})]),t._v(" "),s("div",{staticClass:"action-type flex-row-sb"},t._l(t.actionTypes,function(i,e){return s("nav",{key:e,staticClass:"all-type",class:{barActive:t.isSelect===i.num},on:{click:function(s){t.selectNav(i.text,i.num)}}},[t._v(t._s(i.text))])})),t._v(" "),s("div",{staticClass:"action-more iconfont icon-more-type flex-row",on:{click:t.selectSchool}})]),t._v(" "),s("div",{staticClass:"content discount-content"},[s("Merchant",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getMerchant,expression:"getMerchant"}],attrs:{"infinite-scroll-disabled":"loading","infinite-scroll-distance":"10"}})],1),t._v(" "),s("mt-popup",{staticClass:"body-width",attrs:{position:"bottom"},model:{value:t.popupVisible,callback:function(i){t.popupVisible=i},expression:"popupVisible"}},[s("div",[s("mt-button",{staticClass:"cancel",on:{click:t.cityConcel}},[t._v("取消")]),t._v(" "),s("mt-button",{staticClass:"confirm",on:{click:t.cityConfirm}},[t._v("确定")])],1),t._v(" "),s("mt-picker",{staticClass:"slots",attrs:{slots:t.slots},on:{change:t.onValuesChange}})],1),t._v(" "),s("mt-popup",{staticClass:"body-width h100",attrs:{position:"right"},model:{value:t.popupRightVisible,callback:function(i){t.popupRightVisible=i},expression:"popupRightVisible"}},[s("div",{staticClass:"flex-row-sb padding-l-r-20 lh10 grid-bg"},[s("div",[t._v("请选择学校")]),t._v(" "),s("div",{staticClass:"iconfont icon-cancel ",on:{click:t.cityConcel}})]),t._v(" "),s("div",{staticClass:"flex-row"},[s("div",{staticClass:"half-width h90 bor-right"},t._l(t.schoolInfo.region,function(i,e){return s("div",{staticClass:"iconfont select-region h15 lh5 p5 flex-row-sb bor-left-1",class:{activeRegion:t.selectRegionId===i.id},on:{click:function(s){t.selectRegion(i.id)}}},[s("span",[t._v(t._s(i.name))]),t._v(" "),s("span",{staticClass:"iconfont icon-goright"})])})),t._v(" "),s("div",{staticClass:"half-width h90"},[s("div",{staticClass:"activeSchool p5",on:{click:function(i){t.getSchoolAround()}}},[t._v("全部")]),t._v(" "),s("div",{staticClass:"school-scroll h80"},t._l(t.schoolInfo.schools,function(i){return s("div",{staticClass:"p5",on:{click:function(s){t.getSchoolAround(i.id)}}},[t._v(t._s(i.name))])}))])])])],1)};u._withStripped=!0;var f={render:u,staticRenderFns:[]},m=f;var v=s("VU/8")(p,m,!1,null,null,null);v.options.__file="src\\components\\content\\discountList\\discountList.vue";i.default=v.exports}});
//# sourceMappingURL=1.7e6e2b2c620de6791457.js.map