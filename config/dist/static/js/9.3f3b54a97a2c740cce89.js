webpackJsonp([9],{jdLB:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("WCq4"),i=e("Gu7T"),n=e.n(i),r={data:function(){return{content:""}},props:{endTime:{type:String,default:""},endText:{type:String,default:"已过期"},callback:{type:Function,default:""}},mounted:function(){this.countdowm(this.endTime)},methods:{countdowm:function(t){var s=this,e=setInterval(function(){var a=new Date,i=new Date(t).getTime()-a.getTime();if(i>0){var n=Math.floor(i/864e5),r=Math.floor(i/36e5%24),o=Math.floor(i/6e4%60),l=Math.floor(i/1e3%60);r=r<10?"0"+r:r,o=o<10?"0"+o:o,l=l<10?"0"+l:l;var c="";n>0&&(c=n+"天"+r+"小时"+o+"分"+l+"秒"),n<=0&&r>0&&(c=r+"小时"+o+"分"+l+"秒"),n<=0&&r<=0&&o>0&&(c=o+"分"+l+"秒"),n<=0&&r<=0&&o<=0&&l>0&&(c=l+"秒"),s.content=c}else clearInterval(e),s.content=s.endText,s._callback()},1e3)},_callback:function(){this.callback&&this.callback instanceof Function&&this.callback.apply(this,n()(this))}}},o=function(){var t=this.$createElement;return(this._self._c||t)("span",{attrs:{endTime:this.endTime,callback:this.callback,endText:this.endText}},[this._t("default",[this._v("\n    "+this._s(this.content)+"\n  ")])],2)};o._withStripped=!0;var l={render:o,staticRenderFns:[]},c=l;var d=e("VU/8")(r,c,!1,null,null,null);d.options.__file="src\\components\\common\\payCountDown.vue";var u=d.exports,v=e("VXJq"),m=e("FCHv"),h=e("C0u4"),p={components:{payCountDown:u,noMoreData:v.a,noData:m.a},data:function(){return{orderList:[],paramsData:{limit:10,start:1,userId:""},isSelect:"all",navList:[{id:"all",text:"全部"},{id:"1",text:"待付款"},{id:"2",text:"待发货"},{id:"3",text:"待收货"},{id:"4",text:"已收货"}],message:"取消订单成功"}},beforeMount:function(){this.wxUserInfo=JSON.parse(localStorage.getItem("user")).body.wxUser,this.getOrderList()},methods:{getOrderList:function(t){var s=this;this.$indicator.open({text:"加载中...",spinnerType:"fading-circle"}),this.orderList=[];var e={userId:this.wxUserInfo.userId,limit:this.paramsData.limit,start:this.paramsData.start,status:t};a.a.queryOrderList(e).then(function(t){t&&t.data&&t.data.body&&(s.$indicator.close(),s.orderList=t.data.body.records)})},selectNav:function(t){if(this.isSelect=t,"all"===t){this.getOrderList("")}else{var s=t;this.getOrderList(s)}},cancelOrder:function(t){var s=this;this.$messagebox.confirm("确定取消订单吗?").then(function(e){var i={orderId:t};a.a.canaelOrder(i).then(function(t){t&&t.data&&(s.getOrderList(),s.showMsg())})})},showMsg:function(){this.$toast({message:this.message,duration:2e3,iconClass:"icon icon-success"})},singlegain:function(){this.$router.push({name:"cutdown"})},goOrderDetail:function(t){var s={name:"orderDetail",query:{orderId:t}};this.$router.push(s)},toPay:function(t){console.log(this.orderList);var s={userCutDownId:t.userCutDownId,userId:t.userId,payment:100*t.orderItemList[0].price,lastAmount:t.orderItemList[0].price,postFee:t.postFee,userMessage:t.userMessage,orderId:t.orderId,success:function(){alert("付款成功")}};h.a.payment(s)}}},f=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"order-list content",attrs:{id:"orderList"}},[e("div",{staticClass:"discount-list active-bar flex-row"},t._l(t.navList,function(s,a){return e("nav",{staticClass:"all-type",class:{barActive:t.isSelect===s.id},on:{click:function(e){t.selectNav(s.id)}}},[t._v(t._s(s.text))])})),t._v(" "),t._l(t.orderList,function(s,a){return e("div",{staticClass:"cut-list margin-l-r-5 flex-column font-color-666 "},[e("div",{staticClass:"cut-space-line"}),t._v(" "),e("div",{staticClass:"time-action flex-row-sb"},[e("span",[t._v("订单编号："+t._s(s.orderId))])]),t._v(" "),e("div",{staticClass:"bor-bot bor-top p-1"},[s.orderItemList[0]?e("div",{staticClass:"flex-row-sb",on:{click:function(e){t.goOrderDetail(s.orderId)}}},[e("span",[e("img",{staticClass:"cut-down-list-img",attrs:{src:s.orderItemList[0].thumbnail,alt:""}})]),t._v(" "),e("span",{staticClass:"cut-down-info flex-column"},[e("span",{staticClass:"cut-lgood-name font-color-666"},[t._v(t._s(s.orderItemList[0].title))]),t._v(" "),e("span",{staticClass:"flex-row-sb"},[e("span",{staticClass:"cut-lgood-name"},[e("span",{directives:[{name:"show",rawName:"v-show",value:s.orderItemList[0].attrValue,expression:"list.orderItemList[0].attrValue"}]},[t._v("规格：")]),t._v(t._s(s.orderItemList[0].attrValue))]),t._v(" "),e("span",{staticClass:"wx-kanjia"},[t._v("￥"+t._s(s.orderItemList[0].price)+"元")])])])]):t._e()]),t._v(" "),e("div",{staticClass:"flex-row-sb activeSchool m-t-b-1"},[e("span",{directives:[{name:"show",rawName:"v-show",value:1===s.status,expression:"list.status === 1"}]},[t._v("待付款")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:2===s.status,expression:"list.status === 2"}],staticClass:"font-color-666"},[t._v("待发货")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:3===s.status,expression:"list.status === 3"}],staticClass:"font-color-666"},[t._v("待收货")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:4===s.status,expression:"list.status === 4"}],staticClass:"font-color-666"},[t._v("已收货")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:5===s.status,expression:"list.status === 5"}],staticClass:"font-color-666"},[t._v("退款中")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:6===s.status,expression:"list.status === 6"}],staticClass:"font-color-666"},[t._v("已退款")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:7===s.status,expression:"list.status === 7"}],staticClass:"font-color-666"},[t._v("交易完成")]),t._v(" "),e("span",{directives:[{name:"show",rawName:"v-show",value:8===s.status,expression:"list.status === 8"}],staticClass:"font-color-666"},[t._v("交易取消")]),t._v(" "),e("div",{staticClass:"order-list-btn"},[e("button",{directives:[{name:"show",rawName:"v-show",value:1===s.status,expression:"list.status === 1"}],staticClass:"font-3-5 my-btn",on:{click:function(e){t.toPay(s.orderId)}}},[t._v("付款\n          "),e("pay-count-down",{attrs:{endTime:s.mustPayTime,callback:t.callback,endText:"已过期"}})],1),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:1===s.status,expression:"list.status === 1"}],staticClass:"font-3-5 my-btn",on:{click:function(e){t.cancelOrder(s.orderId)}}},[t._v("取消订单")]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:1!==s.status,expression:"list.status !== 1"}],staticClass:"font-3-5 my-btn",on:{click:t.singlegain}},[t._v("再来一单")])])])])}),t._v(" "),e("no-more-data",{directives:[{name:"show",rawName:"v-show",value:t.orderList.length>0,expression:"orderList.length > 0"}]}),t._v(" "),e("no-data",{directives:[{name:"show",rawName:"v-show",value:0===t.orderList.length,expression:"orderList.length === 0"}]})],2)};f._withStripped=!0;var w={render:f,staticRenderFns:[]},_=w;var x=e("VU/8")(p,_,!1,null,null,null);x.options.__file="src\\components\\content\\order\\orderList.vue";s.default=x.exports}});
//# sourceMappingURL=9.3f3b54a97a2c740cce89.js.map